<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>타로 운세 선택</title>
    <link rel="stylesheet" href="static/choice.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Noto+Serif+KR:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="static/header.css">
    <link rel="stylesheet" href="static/index.css"> <!-- Reusing header styles -->
    <script src="https://js.tosspayments.com/v1/payment"></script>
</head>

<body>
    <!-- Auth Header (Populated by js) -->
    <!-- Auth Header (Populated by js) -->
    <header class="common-header" id="mainHeader">
        <a href="index.html" class="logo">Mystic Tarot</a>
        <div class="auth-menu" id="auth-header">
            <!-- Default content (will be updated by auth_state.js) -->
            <a href="login.html" class="auth-link">로그인</a>
            <span class="divider">|</span>
            <a href="signup.html" class="auth-link">회원가입</a>
        </div>
    </header>

    <div class="background-container">
        <div class="card-circle" id="cardCircle"></div>
        <div class="overlay"></div>
    </div>

    <main class="content">
        <h1 class="title">운명의 갈림길</h1>
        <div class="choice-container">
            <a href="daily_fortune.html" class="choice-card free-choice" title="무료 운세 보기">
                <div class="card-inner">
                    <h2>오늘의 운세</h2>
                    <p class="subtitle">FREE</p>
                    <p class="description">당신의 하루를 비춰줄<br>작은 등불을 확인하세요.</p>
                </div>
            </a>
            <a href="#" class="choice-card paid-choice" title="다른 운세 보기 (유료)">
                <div class="card-inner">
                    <h2>다른 운세 보기</h2>
                    <p class="subtitle">PREMIUM</p>
                    <p class="description">더 깊은 통찰과<br>미래의 조각들을 맞춰보세요.</p>
                </div>
            </a>
        </div>
    </main>

    <script src="static/choice.js"></script>
    <script type="module" src="static/auth_state.js"></script>
    <script>
        // 토스 결제 스크립트
        const clientKey = 'test_ck_D5GePWvyJnrK0W0k6q8gLzN97Eoq'; // 본인 키 확인 필요
        const tossPayments = TossPayments(clientKey);
        const payBtn = document.querySelector('.paid-choice');

        if (payBtn) {
            payBtn.addEventListener('click', (e) => {
                e.preventDefault();
                // 프리미엄 서비스 페이지 목록으로 이동 or 결제창
                // 현재 요구사항에서는 바로 결제가 아니라 메뉴로 가야할 수도 있지만, 원본 로직 유지
                tossPayments.requestPayment('카드', {
                    amount: 3000,
                    orderId: 'ORDER_' + new Date().getTime(),
                    orderName: '프리미엄 타로 운세',
                    customerName: '익명',
                    successUrl: window.location.origin + '/payment/success',
                    failUrl: window.location.origin + '/payment/fail',
                });
            });
        }
    </script>
</body>

</html>
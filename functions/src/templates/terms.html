{% extends "base.html" %}

{% block title %}이용약관 - Mystic Tarot{% endblock %}

{% block head_css %}
    <style>
        .terms-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 2rem;
            background: rgba(13, 0, 21, 0.9); /* 가독성을 위해 배경 진하게 */
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            color: #e0d0f0;
            line-height: 1.6;
            height: 90vh; /* 팝업 꽉 차게 */
            display: flex;
            flex-direction: column;
        }
        .terms-container h1 {
            font-family: 'Cinzel', serif;
            color: #ffd700;
            text-align: center;
            margin-bottom: 2rem;
        }
        .terms-content {
            white-space: pre-line;
            font-size: 0.95rem;
            flex: 1;
            overflow-y: auto; /* 내용 길면 스크롤 */
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            margin-bottom: 20px;
        }
        /* 동의 버튼 스타일 */
        .agree-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: #ffd700;
            color: #0d0015;
            text-align: center;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
        }
        .agree-btn:hover { background: #ffe066; }
    </style>
{% endblock %}

{% block content %}
    <main class="terms-container">
        <h1>이용약관</h1>
        <div class="terms-content">
            제1조 (목적)
            본 약관은 Mystic Tarot(이하 "서비스")이 제공하는 타로 운세 서비스의 이용 조건 및 절차를 규정합니다.

            제2조 (개인정보 수집)
            서비스 이용 시 수집되는 이름, 이메일 등의 정보는 서비스 제공 목적 외에는 사용되지 않습니다.

            제3조 (서비스 이용)
            본 서비스는 무료 및 유료 운세 콘텐츠를 제공하며, 유료 결제 시 포인트가 차감됩니다.

            (본 약관에 동의하시면 아래 버튼을 눌러주세요.)
        </div>

        <button onclick="agreeAndClose()" class="agree-btn">동의하고 닫기</button>
    </main>

    <script>
        // 부모 창(opener)의 체크박스를 제어하는 함수
        function agreeAndClose() {
            // window.opener가 존재하는지 확인 (팝업으로 열렸는지)
            if (window.opener && !window.opener.closed) {
                // 부모 창의 체크박스 찾기 (ID: termsCheck)
                const checkbox = window.opener.document.getElementById('termsCheck');
                if (checkbox) {
                    checkbox.disabled = false; // 비활성화 해제
                    checkbox.checked = true;   // 체크
                }
                window.close(); // 팝업 닫기
            } else {
                alert('회원가입 페이지를 찾을 수 없습니다.');
                window.close();
            }
        }
    </script>
{% endblock %}